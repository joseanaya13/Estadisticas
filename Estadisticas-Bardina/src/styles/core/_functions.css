/* ============================================
   CSS FUNCTIONS - BARDINA ANALYTICS
   Funciones y mixins CSS
   ============================================ */

/* === FUNCIONES UTILITARIAS === */

/* Función para calcular espaciado dinámico */
:root {
  --spacing-multiplier: 1;
}

/* === CUSTOM PROPERTIES CALCULADAS === */

/* Espaciado fluido basado en viewport */
:root {
  --fluid-space-xs: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
  --fluid-space-sm: clamp(0.5rem, 0.4rem + 0.5vw, 1rem);
  --fluid-space-md: clamp(1rem, 0.8rem + 1vw, 2rem);
  --fluid-space-lg: clamp(1.5rem, 1.2rem + 1.5vw, 3rem);
  --fluid-space-xl: clamp(2rem, 1.6rem + 2vw, 4rem);
  --fluid-space-2xl: clamp(3rem, 2.4rem + 3vw, 6rem);
}

/* Tipografía fluida */
:root {
  --fluid-text-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
  --fluid-text-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
  --fluid-text-base: clamp(1rem, 0.9rem + 0.5vw, 1.25rem);
  --fluid-text-lg: clamp(1.125rem, 1rem + 0.625vw, 1.5rem);
  --fluid-text-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.875rem);
  --fluid-text-2xl: clamp(1.5rem, 1.3rem + 1vw, 2.25rem);
  --fluid-text-3xl: clamp(1.875rem, 1.6rem + 1.375vw, 3rem);
  --fluid-text-4xl: clamp(2.25rem, 1.9rem + 1.75vw, 3.75rem);
}

/* === FUNCIONES DE COLOR === */

/* Función para generar variantes de color */
:root {
  /* Generar tints (mezcla con blanco) */
  --color-tint-10: color-mix(in srgb, var(--base-color) 90%, white);
  --color-tint-20: color-mix(in srgb, var(--base-color) 80%, white);
  --color-tint-30: color-mix(in srgb, var(--base-color) 70%, white);
  --color-tint-40: color-mix(in srgb, var(--base-color) 60%, white);
  --color-tint-50: color-mix(in srgb, var(--base-color) 50%, white);
  
  /* Generar shades (mezcla con negro) */
  --color-shade-10: color-mix(in srgb, var(--base-color) 90%, black);
  --color-shade-20: color-mix(in srgb, var(--base-color) 80%, black);
  --color-shade-30: color-mix(in srgb, var(--base-color) 70%, black);
  --color-shade-40: color-mix(in srgb, var(--base-color) 60%, black);
  --color-shade-50: color-mix(in srgb, var(--base-color) 50%, black);
}

/* === FUNCIONES DE CONTRASTE === */

/* Función para texto legible sobre fondo */
:root {
  --text-on-light: #1a1a1a;
  --text-on-dark: #ffffff;
  --text-on-primary: var(--text-on-dark);
  --text-on-secondary: var(--text-on-dark);
  --text-on-success: var(--text-on-dark);
  --text-on-warning: var(--text-on-light);
  --text-on-error: var(--text-on-dark);
  --text-on-info: var(--text-on-dark);
}

/* === FUNCIONES DE ANIMACIÓN === */

/* Funciones de easing personalizadas */
:root {
  --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-in-back: cubic-bezier(0.36, 0, 0.66, -0.56);
  --ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in-expo: cubic-bezier(0.7, 0, 0.84, 0);
  --ease-in-out-expo: cubic-bezier(0.87, 0, 0.13, 1);
  --ease-out-circ: cubic-bezier(0, 0.55, 0.45, 1);
  --ease-in-circ: cubic-bezier(0.55, 0, 1, 0.45);
  --ease-in-out-circ: cubic-bezier(0.85, 0, 0.15, 1);
}

/* Duraciones dinámicas basadas en distancia */
:root {
  --duration-short: 150ms;
  --duration-medium: 300ms;
  --duration-long: 500ms;
  --duration-extra-long: 800ms;
}

/* === FUNCIONES DE LAYOUT === */

/* Container queries simuladas */
:root {
  --container-width: 100%;
  --container-padding: var(--space-4);
  --container-max-width: var(--container-xl);
}

/* Grid dinámico */
:root {
  --grid-min-item-width: 250px;
  --grid-max-columns: 4;
  --grid-gap: var(--space-4);
}

/* === FUNCIONES DE ESTADO === */

/* Estados de interacción */
:root {
  --hover-opacity: 0.8;
  --active-opacity: 0.7;
  --disabled-opacity: 0.5;
  --focus-opacity: 1;
}

/* Estados de elevación */
:root {
  --elevation-0: var(--shadow-none);
  --elevation-1: var(--shadow-xs);
  --elevation-2: var(--shadow-sm);
  --elevation-3: var(--shadow-md);
  --elevation-4: var(--shadow-lg);
  --elevation-5: var(--shadow-xl);
  --elevation-6: var(--shadow-2xl);
}

/* === FUNCIONES DE RESPONSIVE === */

/* Breakpoints como custom properties */
:root {
  --bp-sm: 640px;
  --bp-md: 768px;
  --bp-lg: 1024px;
  --bp-xl: 1280px;
  --bp-2xl: 1536px;
}

/* Container queries */
@container (min-width: 320px) {
  :root {
    --container-size: small;
  }
}

@container (min-width: 640px) {
  :root {
    --container-size: medium;
  }
}

@container (min-width: 1024px) {
  :root {
    --container-size: large;
  }
}

/* === FUNCIONES DE TEMA === */

/* Variables de tema dinámicas */
:root {
  --theme-surface: var(--surface-primary);
  --theme-surface-variant: var(--surface-secondary);
  --theme-on-surface: var(--text-primary);
  --theme-on-surface-variant: var(--text-secondary);
  --theme-primary-container: var(--primary-100);
  --theme-on-primary-container: var(--primary-900);
}

/* === UTILIDADES CALCULADAS === */

/* Calcular contraste automático */
:root {
  --auto-text-color: var(--text-primary);
  --auto-border-color: var(--border-color-light);
  --auto-hover-color: var(--surface-hover);
}

/* === FUNCIONES DE ACCESIBILIDAD === */

/* Ratios de contraste mejorados */
:root {
  --contrast-aa: 4.5;
  --contrast-aaa: 7;
  --focus-ring-width: 2px;
  --focus-ring-offset: 2px;
  --focus-ring-color: var(--primary-600);
}

/* === COMPATIBILIDAD === */

/* Fallbacks para navegadores que no soportan color-mix */
@supports not (color: color-mix(in srgb, red, blue)) {
  :root {
    --color-tint-10: rgba(255, 255, 255, 0.1);
    --color-tint-20: rgba(255, 255, 255, 0.2);
    --color-shade-10: rgba(0, 0, 0, 0.1);
    --color-shade-20: rgba(0, 0, 0, 0.2);
  }
}

/* Fallbacks para navegadores que no soportan clamp */
@supports not (width: clamp(1rem, 5vw, 3rem)) {
  :root {
    --fluid-space-sm: 0.5rem;
    --fluid-space-md: 1rem;
    --fluid-space-lg: 1.5rem;
    --fluid-text-base: 1rem;
    --fluid-text-lg: 1.125rem;
    --fluid-text-xl: 1.25rem;
  }
}

/* === DEBUGGING === */

/* Variables para debugging en desarrollo */
:root {
  --debug-grid: transparent;
  --debug-outline: transparent;
  --debug-background: transparent;
}

/* Modo debug (activar manualmente) */
.debug-mode {
  --debug-grid: rgba(255, 0, 0, 0.1);
  --debug-outline: 1px solid red;
  --debug-background: rgba(0, 255, 0, 0.05);
}

.debug-mode * {
  outline: var(--debug-outline);
  background: var(--debug-background);
}

/* === MEDIA QUERIES HELPER === */

/* Variables para media queries comunes */
:root {
  --mobile-first: screen;
  --tablet-up: screen and (min-width: 768px);
  --desktop-up: screen and (min-width: 1024px);
  --large-desktop-up: screen and (min-width: 1280px);
  --print-media: print;
  --dark-mode: (prefers-color-scheme: dark);
  --light-mode: (prefers-color-scheme: light);
  --reduced-motion: (prefers-reduced-motion: reduce);
  --high-contrast: (prefers-contrast: high);
}